<?php/* Plugin Name: MemberMouse Automatic Email ReminderDescription: To be used with MemberMouse and is used to send automatic reminders of renewal of subscription. Version: 1.0Author: Baljinder SinghAuthor URI: https://candeavor.com/License: Rights reserved with Candeavor. Usage without consent of Candeavor is strictly prohibited.Text Domain: member-mouse-auto-emails*/// Security patchdefined( 'ABSPATH' ) or die( 'No hacking please!' );define( 'MMAERHOME', dirname( __FILE__ ) . '/' );$basenames=explode("/", plugin_basename( __FILE__ ) );define( 'MMAERDOMAIN', $basenames[0] );define('MMAERURL', plugin_dir_url( __FILE__ ) );// Includes//include(MMAERHOME.'admin/post_meta.php');//include(MMAERHOME.'wp/render.php');// Include Admin Page for settingsadd_action( 'admin_menu', 'settings_page' );function settings_page() {	add_menu_page(		__( 'Mm Remind', 'mm-remind' ),		'Mm Remind',		'manage_options',		MMAERHOME.'admin/settings.php',		'',		plugins_url( MMAERDOMAIN.'/assets/settings-icon.png' ),		11	    );}/* // Add metabox to relevant post types by checking options$optns = unserialize( get_option( 'mm-remind-set' ) );if( is_array( $optns ) ) foreach( $optns[ 'display_on' ] as $pst ) add_action( 'add_meta_boxes_' . $pst, 'post_meta_box_mm_remind' );add_action('wp_insert_post', 'add_metas_mm_remind'); */ //Enqueue Admin and frontend side styles and scriptsfunction enq_script_style( $hook ) {	if( is_admin() ) {		if ( ( 'post-new.php' != $hook ) && ( 'post.php' != $hook ) && ( 'member-mouse-auto-emails/admin/settings.php' != $hook ) ) {			return;		}		wp_register_style( 'mm_remind_css', MMAERURL . 'admin/req/mm-remind-admin.css', false, '1.0.0' );		wp_enqueue_style( 'mm_remind_css' );		wp_enqueue_script( 'mm-remind', MMAERURL . 'admin/req/mm-remind-admin.js', array( 'jquery' ) );		wp_enqueue_script( 'mm-remind-color-js', MMAERURL . 'admin/req/js-color.js', array( 'jquery' ) );	}	/* else{		wp_register_style( 'mm_remind_css_wp', MMAERURL . 'wp/req/style.css', false, '1.0.0' );		wp_enqueue_style( 'mm_remind_css_wp' );		wp_register_style( 'fontAwesome', MMAERURL . 'wp/req/font-awesome.css', false, '1.0.0' );		wp_enqueue_style( 'fontAwesome' );		wp_enqueue_script( 'mm-remind', MMAERURL . 'wp/req/script.js', array( 'jquery' ) );	} */}add_action( 'admin_enqueue_scripts', 'enq_script_style' );//add_action( 'wp_enqueue_scripts', 'enq_script_style' );//shortcode for easy use/* function mm_remind_show( $att ){	global $post;	return render_mm_remind_html( @$att[ 'networks' ], @$att[ 'size' ], 'default', $post->ID );}add_shortcode('mm_remind_show', 'mm_remind_show'); *///Handling Global or post specific HTML Renderinginclude(MMAERHOME.'wp/handeler.php');//function to croninclude(MMAERHOME.'wp/render.php'); add_action('init', function(){	$optns = unserialize( get_option( 'mm-remind-set' ) );	if(isset($optns['subject']) && isset($optns['mm-remind-email-content']) && isset($optns['mm-remind-days'])){		$mmaecron = get_option('mmaecron');		if(time() > ($mmaecron + 86400)){			update_option('mmaecron', time());			cromme();		}				//triggering with url		if( (!is_admin()) && ($_GET['mmaetrigger']==@$optns['triggercode']) ){			cromme();		}	}});?>